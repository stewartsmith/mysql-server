--source include/have_falcon.inc

#
# Bug #32398: Falcon: tablespace file can be table file
#
--echo *** Bug #32398 ***

# ----------------------------------------------------- #
# --- Initialisation                                --- #
# ----------------------------------------------------- #
let $engine = 'Falcon';
eval SET @@storage_engine = $engine;

# ----------------------------------------------------- #
# --- Test                                          --- #
# ----------------------------------------------------- #
eval CREATE TABLESPACE ts1 ADD DATAFILE 'ts1.fts' ENGINE=$engine;
eval CREATE TABLESPACE ts2 ADD DATAFILE 'ts2.MYD' ENGINE=$engine;
eval CREATE TABLESPACE ts3 ADD DATAFILE 'ts3' ENGINE=$engine;
eval CREATE TABLESPACE ts4 ADD DATAFILE 'ts4test' ENGINE=$engine;
--error ER_BAD_PATH
eval CREATE TABLESPACE ts5 ADD DATAFILE '' ENGINE=$engine;

# ----------------------------------------------------- #
# --- Check                                         --- #
# ----------------------------------------------------- #
SELECT TABLESPACE_NAME, FILE_NAME FROM INFORMATION_SCHEMA.FILES;

# ----------------------------------------------------- #
# --- Final cleanup                                 --- #
# ----------------------------------------------------- #
eval DROP TABLESPACE ts1 ENGINE=$engine;
eval DROP TABLESPACE ts2 ENGINE=$engine;
eval DROP TABLESPACE ts3 ENGINE=$engine;
eval DROP TABLESPACE ts4 ENGINE=$engine;
