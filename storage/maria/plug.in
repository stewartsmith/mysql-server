MYSQL_STORAGE_ENGINE(maria,, [Maria Storage Engine],
        [Crash-safe tables with MyISAM heritage], [max,max-no-ndb])
MYSQL_PLUGIN_DIRECTORY(maria,  [storage/maria])
MYSQL_PLUGIN_STATIC(maria,     [libmaria.a])
# the line below is unfortunately needed to have ./configure include
# Maria by default; fixing this is WL#4423
MYSQL_PLUGIN_DYNAMIC(maria,     [dummymaria.la])
# We want to allow --without-maria-storage-engine => not mandatory.
MYSQL_PLUGIN_DEPENDS_ON_MYSQL_INTERNALS(maria, [ha_maria.cc])

MYSQL_PLUGIN_ACTIONS(maria,  [
AC_CONFIG_FILES(storage/maria/unittest/Makefile)
AC_ARG_WITH(maria-tmp-tables,
    AC_HELP_STRING([--with-maria-tmp-tables],[Use Maria for internal temporary tables]),
    [with_maria_tmp_tables=$withval],
    [with_maria_tmp_tables=yes]
)

if test "$with_maria_tmp_tables" = "yes"
then
  AC_DEFINE([USE_MARIA_FOR_TMP_TABLES], [1], [Maria is used for internal temporary tables])
fi
])
